import streamlit as st
from datetime import datetime, timedelta

# ------------------------------------------------------------------
# [1] ì„¤ì •
# ------------------------------------------------------------------
st.set_page_config(page_title="ì˜¤ëŠ˜ì˜ ì¼ì •", page_icon="ğŸ“…", layout="centered")

# ------------------------------------------------------------------
# [2] ì‹œê°„ ê³„ì‚° í•¨ìˆ˜ (í•œêµ­ ì‹œê°„ ë³´ì •)
# ------------------------------------------------------------------
def get_current_time():
    # Streamlit ì„œë²„ëŠ” ì„¸ê³„ í‘œì¤€ì‹œ(UTC) ê¸°ì¤€ì¼ ìˆ˜ ìˆì–´ì„œ 9ì‹œê°„ì„ ë”í•´ì¤ë‹ˆë‹¤.
    # ë§Œì•½ ì‹œê°„ì´ ì´ìƒí•˜ë©´ +9 ë¶€ë¶„ì„ ì§€ìš°ê±°ë‚˜ ì¡°ì •í•˜ë©´ ë©ë‹ˆë‹¤.
    return datetime.utcnow() + timedelta(hours=9)

# ------------------------------------------------------------------
# [3] ë©”ì¸ í™”ë©´ êµ¬ì„±
# ------------------------------------------------------------------
# í•µì‹¬: ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ ë°–ì´ ì•„ë‹ˆë¼, ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ê³„ì‚°í•˜ë„ë¡ ì—¬ê¸°ì— ë‘¡ë‹ˆë‹¤.
now = get_current_time()
date_str = now.strftime("%Yë…„ %mì›” %dì¼ (%a)")
time_str = now.strftime("%Hì‹œ %Më¶„")

# ì œëª©ê³¼ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼
col1, col2 = st.columns([7, 3])
with col1:
    st.title(f"ğŸ“… {date_str}")
    st.caption(f"í˜„ì¬ ì‹œê°„: {time_str}")
with col2:
    st.write("") # ì¤„ë°”ê¿ˆìš©
    # ì´ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í™”ë©´ì´ ë‹¤ì‹œ ì‹¤í–‰(Rerun)ë˜ë©´ì„œ ì‹œê°„ì„ ìƒˆë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
    if st.button("ğŸ”„ ì‹œê°„ ê°±ì‹ ", type="primary"):
        st.rerun()

st.divider()

# ------------------------------------------------------------------
# [4] ì˜¤ëŠ˜ì˜ í•  ì¼ / D-Day (ì˜ˆì‹œ)
# ------------------------------------------------------------------
st.subheader("ğŸ“Œ ì˜¤ëŠ˜ì˜ ì£¼ìš” ì¼ì •")

# ì²´í¬ë°•ìŠ¤ë¡œ í•  ì¼ ê´€ë¦¬ (ì˜ˆì‹œ)
check1 = st.checkbox("ì•„ë²„ë‹˜ ì»¨ë””ì…˜ ì²´í¬ (ì²´ì˜¨/ì‹ì‚¬)")
check2 = st.checkbox("ì˜¤ì „ íšŒì§„ ë° ì°¨íŠ¸ ì ê²€")
check3 = st.checkbox("ì ì‹¬ ì•½ì† (ê¹€ ì›ì¥ë‹˜)")

st.write("")

# ê°„ë‹¨í•œ D-Day ê³„ì‚°ê¸°
st.subheader("â³ D-Day")
target_date = datetime(2026, 3, 1) # ì˜ˆ: 3ì›” 1ì¼
d_day = target_date - datetime(now.year, now.month, now.day)

if d_day.days > 0:
    st.info(f"3ì›” 1ì¼ê¹Œì§€ **{d_day.days}ì¼** ë‚¨ì•˜ìŠµë‹ˆë‹¤.")
elif d_day.days == 0:
    st.success("ì˜¤ëŠ˜ì´ D-Dayì…ë‹ˆë‹¤! ğŸ‰")
else:
    st.warning(f"D-Dayë¡œë¶€í„° {abs(d_day.days)}ì¼ ì§€ë‚¬ìŠµë‹ˆë‹¤.")

